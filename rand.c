#include "helpers.h"

#define RANDOMS_SIZE 100

const BYTE RANDOMS[RANDOMS_SIZE] = {
    0x11,
    0x12,
    0x13,
    0x15,
    0x17,
    0x19,
    0x20,
    0x26,
    0x34,
    0x35,
    0x42,
    0x47,
    0x50,
    0x52,
    0x54,
    0x56,
    0x57,
    0x59,
    0x69,
    0x73,
    0x78,
    0x83,
    0x87,
    0x94,
    0x99,
    0x4c,
    0xef,
    0xa2,
    0x6f,
    0xfe,
    0xbe,
    0xc3,
    0x4a,
    0xc0,
    0xe0,
    0xdc,
    0xe5,
    0x4f,
    0xde,
    0x6c,
    0x3d,
    0xf7,
    0xd7,
    0xa1,
    0xb9,
    0x7a,
    0xbb,
    0x3b,
    0x8e,
    0xc8,
    0xd8,
    0x5d,
    0xce,
    0xdd,
    0xac,
    0xbc,
    0xc6,
    0xd9,
    0xd2,
    0x9e,
    0xa6,
    0x3c,
    0xd0,
    0xeb,
    0xbf,
    0x1b};

char *_rnptr1, *_rnptr2, *_rnptr3, *_rnptr4;

#define SEED 0x77ff77ff

typedef union _random_number
{
    int i;
    struct
    {
        BYTE _1, _2, _3, _4;
    };
} rand_num;

int rand()
{
    static rand_num random = {SEED};
    random.i <<= 1;
    random._1 ^= *_rnptr1;
    random._2 ^= *_rnptr2;
    random._3 ^= *_rnptr3;
    random._4 ^= *_rnptr4;
    _rnptr1 = (char *)((int)RANDOMS + random._1 & 5);
    _rnptr2 = (char *)((int)RANDOMS + random._2 & 5);
    _rnptr3 = (char *)((int)RANDOMS + random._3 & 5);
    _rnptr4 = (char *)((int)RANDOMS + random._4 & 5);
}